<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avoidance Procrastinator Workbook</title>
    <script src="node_modules/roughjs/bundled/rough.js"></script>
    <style>
        @font-face {
            font-family: 'Virgil';
            src: url('https://unpkg.com/@excalidraw/excalidraw@0.17.0/dist/excalidraw-assets/Virgil.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Virgil', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #fefefe;
            color: #2d2d2d;
            line-height: 1.6;
            padding: 40px;
        }

        .workbook-page {
            width: 8.5in;
            height: 11in;
            margin: 0 auto;
            padding: 0.75in;
            background: white;
            position: relative;
            page-break-after: always;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .page-header {
            margin-bottom: 30px;
            text-align: center;
            position: relative;
        }

        .day-title {
            font-size: 28px;
            font-weight: bold;
            color: #1e40af;
            margin-bottom: 10px;
            position: relative;
            z-index: 10;
        }

        .day-subtitle {
            font-size: 18px;
            color: #6b7280;
            margin-bottom: 5px;
        }

        .day-focus {
            font-size: 16px;
            color: #374151;
            font-style: italic;
        }

        .section {
            margin-bottom: 25px;
            position: relative;
        }

        .section-title {
            font-size: 20px;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 15px;
            position: relative;
            z-index: 10;
        }

        .section-content {
            font-size: 14px;
            line-height: 1.7;
            color: #374151;
        }

        .exercise-box {
            background: #f8fafc;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            position: relative;
        }

        .fillable-line {
            border-bottom: 2px solid #d1d5db;
            display: inline-block;
            min-width: 200px;
            margin: 0 5px;
            position: relative;
        }

        .fillable-box {
            border: 2px solid #d1d5db;
            min-height: 80px;
            padding: 10px;
            margin: 10px 0;
            background: #f9fafb;
            border-radius: 4px;
        }

        .bullet-point {
            margin: 8px 0;
            padding-left: 20px;
            position: relative;
        }

        .bullet-point::before {
            content: "•";
            position: absolute;
            left: 0;
            color: #6366f1;
            font-weight: bold;
        }

        .step-number {
            display: inline-block;
            background: #6366f1;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-weight: bold;
            margin-right: 10px;
            position: relative;
            z-index: 10;
        }

        .courage-thought {
            background: #fef3c7;
            padding: 15px;
            margin-top: 20px;
            border-radius: 6px;
            font-style: italic;
            text-align: center;
            position: relative;
        }

        .svg-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        /* Print styles */
        @media print {
            body {
                padding: 0;
            }
            .workbook-page {
                margin: 0;
                box-shadow: none;
                page-break-after: always;
            }
        }

        .question-row {
            display: flex;
            margin: 10px 0;
            align-items: center;
        }

        .question-text {
            margin-right: 10px;
            font-weight: 500;
        }

        .scale-option {
            margin: 0 5px;
            padding: 5px 10px;
            border: 2px solid #d1d5db;
            border-radius: 4px;
            background: white;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- Template will be populated by JavaScript -->
    <div id="workbook-content"></div>

    <script>
        // Rough.js setup
        const rc = rough.svg(document.body);

        // Hand-drawn decorative elements
        function drawHandDrawnBorder(element, width, height) {
            const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            svg.classList.add("svg-overlay");
            svg.setAttribute("width", width);
            svg.setAttribute("height", height);
            
            // Draw rough border
            const border = rc.rectangle(5, 5, width - 10, height - 10, {
                stroke: '#6366f1',
                strokeWidth: 2,
                roughness: 1.2,
                seed: Math.random() * 1000
            });
            
            svg.appendChild(border);
            element.style.position = 'relative';
            element.appendChild(svg);
        }

        function drawHandDrawnUnderline(element) {
            const rect = element.getBoundingClientRect();
            const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            svg.classList.add("svg-overlay");
            svg.setAttribute("width", rect.width + 20);
            svg.setAttribute("height", "40");
            svg.style.top = '20px';
            svg.style.left = '-10px';
            
            const underline = rc.line(10, 10, rect.width + 10, 15, {
                stroke: '#f59e0b',
                strokeWidth: 3,
                roughness: 1.5,
                seed: Math.random() * 1000
            });
            
            svg.appendChild(underline);
            element.style.position = 'relative';
            element.appendChild(svg);
        }

        function drawHandDrawnBox(element) {
            const rect = element.getBoundingClientRect();
            const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            svg.classList.add("svg-overlay");
            svg.setAttribute("width", "100%");
            svg.setAttribute("height", "100%");
            
            const box = rc.rectangle(3, 3, rect.width - 6, rect.height - 6, {
                stroke: '#10b981',
                strokeWidth: 2,
                roughness: 1.1,
                fill: '#f0fdf4',
                fillStyle: 'hachure',
                hachureAngle: 45,
                hachureGap: 8,
                seed: Math.random() * 1000
            });
            
            svg.appendChild(box);
            element.appendChild(svg);
        }

        // Template data structure
        const workbookData = {
            introduction: {
                title: "The Avoidance Procrastinator Workbook: Your Path From Fear to Freedom",
                sections: [
                    {
                        title: "Welcome to Your Transformation Journey",
                        content: `If you've identified as an **Avoidance Procrastinator**, you're part of the most common procrastination type—and you're certainly not alone. Research by Dr. Joseph Ferrari and others shows that avoidant procrastination affects millions of people who delay tasks not because they lack motivation or organization, but because they're trying to protect themselves from difficult emotions like fear of failure, judgment, or disappointment.

**You procrastinate because your mind is trying to keep you safe.** When faced with challenging tasks, your brain anticipates potential negative outcomes—criticism, failure, embarrassment, or simply not meeting impossibly high standards—and chooses the temporary relief of avoidance over the discomfort of action. This isn't laziness or lack of willpower; it's an understandable coping mechanism that once served a purpose but now limits your potential.`
                    }
                ]
            },
            day1: {
                title: "Day 1: Understanding Your Fear - The Foundation",
                subtitle: "Today's Focus: Identify the specific fears driving your avoidance patterns",
                timeCommitment: "Time Commitment: 20 minutes",
                coreExercise: "Core Exercise: Fear Inventory",
                sections: [
                    {
                        title: "Morning Check-in (2 minutes)",
                        type: "checkin",
                        content: `**Daily Questions:**
- What am I avoiding today and what fear is driving it?
- What is one small step I can take toward a feared task?
- How can I show myself compassion around this challenge?`,
                        fillable: [
                            { label: "Fear I'm experiencing today:", type: "line" },
                            { label: "Avoided task:", type: "line" },
                            { label: "One small step:", type: "line" }
                        ]
                    },
                    {
                        title: "Main Exercise: Fear Inventory (15 minutes)",
                        type: "exercise",
                        content: "**Purpose:** Map the specific fears that fuel your procrastination patterns",
                        steps: [
                            {
                                title: "Step 1: Identify Your Current Avoidance (5 minutes)",
                                content: "Think about tasks you've been putting off. List 3-5 specific items:",
                                fillable: Array(5).fill({ type: "numbered-line" })
                            },
                            {
                                title: "Step 2: Dig Deeper Into the Fears (10 minutes)",
                                content: "For each avoided task, complete this framework:",
                                fillable: [
                                    { label: "Task:", type: "line" },
                                    { label: "What specifically am I afraid might happen?", type: "box" },
                                    { label: "What would this mean about me if it happened?", type: "box" },
                                    { label: "How likely is this fear to actually occur? (1-10 scale)", type: "scale" }
                                ]
                            }
                        ]
                    }
                ],
                courageThought: "Every fear I name loses some of its power over me. I am building awareness, not judgment."
            }
        };

        // Render functions
        function renderPage(data, pageType) {
            const page = document.createElement('div');
            page.className = 'workbook-page';

            // Page header
            if (pageType === 'day') {
                const header = document.createElement('div');
                header.className = 'page-header';
                
                const title = document.createElement('h1');
                title.className = 'day-title';
                title.textContent = data.title;
                header.appendChild(title);

                if (data.subtitle) {
                    const subtitle = document.createElement('div');
                    subtitle.className = 'day-subtitle';
                    subtitle.textContent = data.subtitle;
                    header.appendChild(subtitle);
                }

                if (data.timeCommitment) {
                    const time = document.createElement('div');
                    time.className = 'day-focus';
                    time.textContent = data.timeCommitment;
                    header.appendChild(time);
                }

                if (data.coreExercise) {
                    const exercise = document.createElement('div');
                    exercise.className = 'day-focus';
                    exercise.textContent = data.coreExercise;
                    header.appendChild(exercise);
                }

                page.appendChild(header);
            }

            // Sections
            if (data.sections) {
                data.sections.forEach(section => {
                    const sectionEl = document.createElement('div');
                    sectionEl.className = 'section';

                    const sectionTitle = document.createElement('h2');
                    sectionTitle.className = 'section-title';
                    sectionTitle.textContent = section.title;
                    sectionEl.appendChild(sectionTitle);

                    const sectionContent = document.createElement('div');
                    sectionContent.className = 'section-content';
                    sectionContent.innerHTML = section.content.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                    sectionEl.appendChild(sectionContent);

                    // Add fillable elements
                    if (section.fillable) {
                        section.fillable.forEach((item, index) => {
                            const fillableEl = createFillableElement(item, index);
                            sectionEl.appendChild(fillableEl);
                        });
                    }

                    // Add steps for exercises
                    if (section.steps) {
                        section.steps.forEach((step, stepIndex) => {
                            const stepEl = document.createElement('div');
                            stepEl.className = 'exercise-box';
                            
                            const stepTitle = document.createElement('div');
                            stepTitle.innerHTML = `<span class="step-number">${stepIndex + 1}</span><strong>${step.title}</strong>`;
                            stepEl.appendChild(stepTitle);

                            if (step.content) {
                                const stepContent = document.createElement('div');
                                stepContent.innerHTML = step.content;
                                stepEl.appendChild(stepContent);
                            }

                            if (step.fillable) {
                                step.fillable.forEach((item, index) => {
                                    const fillableEl = createFillableElement(item, index);
                                    stepEl.appendChild(fillableEl);
                                });
                            }

                            sectionEl.appendChild(stepEl);
                        });
                    }

                    page.appendChild(sectionEl);
                });
            }

            // Courage thought
            if (data.courageThought) {
                const courageEl = document.createElement('div');
                courageEl.className = 'courage-thought';
                courageEl.innerHTML = `<strong>Courage Building Thought:</strong><br><em>"${data.courageThought}"</em>`;
                page.appendChild(courageEl);
            }

            return page;
        }

        function createFillableElement(item, index) {
            const container = document.createElement('div');
            
            if (item.type === 'line') {
                const label = document.createElement('span');
                label.textContent = item.label + ' ';
                const line = document.createElement('span');
                line.className = 'fillable-line';
                container.appendChild(label);
                container.appendChild(line);
            } else if (item.type === 'numbered-line') {
                const number = document.createElement('span');
                number.textContent = `${index + 1}. `;
                const line = document.createElement('span');
                line.className = 'fillable-line';
                container.appendChild(number);
                container.appendChild(line);
            } else if (item.type === 'box') {
                if (item.label) {
                    const label = document.createElement('div');
                    label.innerHTML = `<strong>${item.label}</strong>`;
                    container.appendChild(label);
                }
                const box = document.createElement('div');
                box.className = 'fillable-box';
                container.appendChild(box);
            } else if (item.type === 'scale') {
                const label = document.createElement('div');
                label.innerHTML = `<strong>${item.label}</strong>`;
                container.appendChild(label);
                
                const scaleRow = document.createElement('div');
                scaleRow.className = 'question-row';
                
                for (let i = 1; i <= 10; i++) {
                    const option = document.createElement('span');
                    option.className = 'scale-option';
                    option.textContent = i;
                    scaleRow.appendChild(option);
                }
                container.appendChild(scaleRow);
            }
            
            container.style.margin = '10px 0';
            return container;
        }

        // Generate pages
        function generateWorkbook() {
            const container = document.getElementById('workbook-content');
            
            // Generate Day 1 page
            const day1Page = renderPage(workbookData.day1, 'day');
            container.appendChild(day1Page);

            // Add hand-drawn elements after DOM is ready
            setTimeout(() => {
                // Add decorative elements
                document.querySelectorAll('.day-title').forEach(title => {
                    drawHandDrawnUnderline(title);
                });

                document.querySelectorAll('.exercise-box').forEach(box => {
                    drawHandDrawnBox(box);
                });

                document.querySelectorAll('.courage-thought').forEach(thought => {
                    const rect = thought.getBoundingClientRect();
                    drawHandDrawnBorder(thought, rect.width, rect.height);
                });
            }, 100);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', generateWorkbook);
    </script>
</body>
</html>